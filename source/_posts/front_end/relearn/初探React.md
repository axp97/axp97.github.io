---
title: åˆæ¢React
date: 2021-07-04 20:00:00
author: å®‰å°ç›¼
categories: å‰ç«¯
tags:
  - React
  - å‰ç«¯è¿›é˜¶
---

## ç›®æ ‡

- [x]Â jsxä»‹ç»
- [x]Â å¼€å¯é¡¹ç›®
- [x]Â å‡½æ•°ç»„ä»¶å’Œclassç»„ä»¶
- [x]Â ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ
- [x]Â å¸¸â»…é”™è¯¯å’Œæ€§èƒ½é—®é¢˜

## çŸ¥è¯†è¦ç‚¹

### ä¸€ã€jsxä»‹ç»

ä½¿â½¤ `react` æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿â½¤ `jsx` è¯­æ³•æ¥ä¹¦å†™æˆ‘ä»¬çš„æ¨¡ç‰ˆã€‚

### 1.1. å®šä¹‰

å®ƒæ˜¯ç±»ä¼¼ `DOM` çš„ `xml` ç»“æ„çš„è¯­æ³•ï¼ŒåŒºåˆ«æ˜¯å¯ä»¥åœ¨ `jsx` ä¸­ä½¿â½¤ `{}` æ¥ä½¿â½¤ `js` è¡¨è¾¾å¼ã€‚

```html
<div className="foo">
  {something ? "something is true" : "something is false"}
</div>
```

### 1.2. æ€»ç»“

1. `jsx` æ˜¯â¼€ç§è¯­æ³•ç³–ï¼Œæˆ‘ä»¬éœ€è¦å°†ä»–ä»¬ç¼–è¯‘ä¸º `React.createElement` çš„å½¢å¼
2. å†™ `jsx` éœ€è¦æ³¨æ„ç±»å‹å¿…é¡»åˆæ³•ï¼Œå°¤å…¶æ˜¯å†™å¸ƒå°”è¡¨è¾¾å¼
çš„æ—¶å€™éœ€è¦é¢å¤–æ³¨æ„ï¼Œå°½é‡ä½¿â½¤ä¸‰â½¬è¿ç®—ç¬¦æ¥ä¹¦å†™ jsx
3. éœ€è¦æ³¨æ„ `class` å’Œ `for` æ ‡ç­¾åœ¨ä¹¦å†™æ—¶éœ€è¦æ”¹ä¸º
`className` å’Œ `htmlFor`

### äºŒã€åˆ›å»ºé¡¹ç›®

### 1. `CDN` é“¾æ¥å¼•å…¥

[CDNé“¾æ¥ - Reactä¸­æ–‡å®˜ç½‘](https://react.docschina.org/docs/cdn-links.html)

### 2. ä½¿ç”¨å®˜æ–¹è„šæ‰‹æ¶ `creact-react-app`

### 2.1. `npx` æ–¹å¼

```cmd
// åˆ›å»ºé¡¹ç›®
npx create-react-app <project-name>
// è¿›å…¥é¡¹ç›®ç›®å½•å¹¶å¯åŠ¨
cd <project-name>
npm run start
```

### 2.2. `npm` æ–¹å¼

```cmd
// å…¨å±€å®‰è£…create-react-app
npm install -g create-react-app
// åˆ›å»ºé¡¹ç›®
create-react-app <project-name>
// è¿›å…¥é¡¹ç›®ç›®å½•å¹¶å¯åŠ¨
cd <project-name>
npm run start
```

### ä¸‰ã€å‡½æ•°ç»„ä»¶å’Œclassç»„ä»¶

### 3.1. å‡½æ•°ç»„ä»¶

æ˜¯ä¸€ä¸ªå‡½æ•°å»è¿”å› `jsx`ã€‚

```jsx
function Foo(props) {
  return (
    <div>
      {props.text || 'Foo'}
    </div>
  );
}
```

### 3.2. classç»„ä»¶

ä»¥ç»§æ‰¿çš„å½¢å¼ï¼Œ`render` ä¹Ÿè¿”å›ä¸€ä¸ª `jsx`

```jsx
class Bar extends React.Component {
  render() {
    return (
      <div>
        {this.props.text || 'Bar'}
      </div>
    );
  }
}
```

### 3.3. åŒºåˆ«

æœ¬è´¨ï¼šæ˜¯å¦è¦ç»´æŠ¤å†…éƒ¨çŠ¶æ€

1. åŠ è½½çš„ `props` â½…å¼ä¸åŒï¼šè·å–ä¼ å‚
  * å‡½æ•°å¼å®šä¹‰ç»„ä»¶ï¼šä»ç»„ä»¶å‡½æ•°çš„å‚æ•°åŠ è½½
  * `class` å½¢å¼çš„ç»„ä»¶ï¼šé€šè¿‡ `this.props` è·å–ä¼ â¼Šçš„å‚æ•°
2. å‡½æ•°å¼ç»„ä»¶â½è¾ƒç®€å•ï¼Œå†…éƒ¨â½†æ³•ç»´æŠ¤çŠ¶æ€ã€‚`class` å½¢å¼å†…éƒ¨å¯ä»¥é€šè¿‡ `this.state` å’Œ `this.setState` â½…æ³•æ›´æ–°å†…éƒ¨ `state`ï¼ŒåŒæ—¶æ›´æ–° `render` â¾¥â¾¯çš„å‡½æ•°æ¸²æŸ“çš„ç»“æœ
3. `class` ç»„ä»¶å†…éƒ¨å¯ä»¥å®šä¹‰æ›´å¤šçš„â½…æ³•åœ¨å®ä¾‹ä¸Šï¼Œä½†æ˜¯å‡½æ•°å¼ç»„ä»¶â½†æ³•å®šä¹‰

### å››ã€ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ

`componentWillMount` -> `render` -> `componentDidMount`(å‘é€è¯·æ±‚ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“å‹å¥½)
`componentWillReceiveProps`(å¼ƒç”¨) -> `componentWillUpdate` ->
`render` -> `componentDidUpdate`

### äº”ã€å¸¸â»…é”™è¯¯å’Œæ€§èƒ½é—®é¢˜

### 5.1. å¼‚æ­¥è¿‡ç¨‹ä½¿â½¤å•ä¾‹çš„ event å¯¹è±¡

`React` ä¸­å…¨å±€å•ä¾‹çš„ `event` å¯¹è±¡ã€‚ 
å¼‚æ­¥æ“ä½œæœ€å¥½å°†å¯¹è±¡å†…éƒ¨éœ€è¦çš„å€¼å…ˆè¿›â¾æ‹·â»‰èµ‹å€¼ã€‚

### 5.2. æ€§èƒ½ä¼˜åŒ–â½…å¼

* `react dev tools`ï¼šæ£€æµ‹ç»„ä»¶æ˜¯å¦å‡ºç°ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
* [`why-did-you-render`](https://www.npmjs.com/package/@welldone-software/why-did-you-render)ï¼šèƒ½æ£€æµ‹â»šâ¾¯ä¸­çš„å…ƒç´ æ˜¯å¦å‡ºç°äº†ä¸å¿…è¦çš„é‡æ¸²æŸ“
* `class` ä¸­æå‰å£°æ˜ç®­å¤´å‡½æ•°ï¼šä¿è¯ `render` æ‰§â¾è¿‡ç¨‹ä¸­
çš„å‡½æ•°ä¸ä¼šå› ä¸ºå¼•â½¤é—®é¢˜å¯¼è‡´é‡æ–°æ¸²æŸ“ã€‚

### 5.3. immutable åº“ï¼šimmutable-js å’Œ immer

é…åˆ `shouldComponentUpdate` è¿›â¾æ€§èƒ½ä¼˜åŒ–ã€‚é€šè¿‡åˆ¤å®šå¯¹è±¡æ˜¯å¦ä¸ºåŒä¸€ä¸ªå¼•ç”¨ï¼Œå†³å®šå­ç»„ä»¶æ˜¯å¦é‡æ–°æ¸²æŸ“ã€‚

`immutable-js`å’Œ`immer`æ˜¯ `js` é€šç”¨åº“ã€‚éƒ½å¯ä»¥åšåˆ°è®©ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œ`key` æ”¹å˜äº†å¼•ç”¨ä¼šæ–­æ‰ï¼›ä¸æ”¹å˜çš„è¯ä¿æŒå¼•ç”¨ã€‚

ğŸ‘**`immer`**åŸç”Ÿä½¿ç”¨ï¼Œ`api`å°‘ï¼Œä¸Šæ‰‹ç®€å•ã€‚
